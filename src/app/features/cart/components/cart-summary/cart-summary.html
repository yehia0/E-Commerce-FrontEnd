<!-- src/app/features/cart/components/cart-summary/cart-summary.html -->

<div class="cart-summary">
  <h2 class="summary-title">Order Summary</h2>

  <!-- Subtotal -->
  <div class="summary-row">
    <span class="summary-label">Subtotal</span>
    <span class="summary-value">{{ subtotal.toFixed(2) }} EGP</span>
  </div>

  <!-- Shipping -->
  <div class="summary-row">
    <span class="summary-label">Shipping</span>
    <span class="summary-value">{{ getShippingText() }}</span>
  </div>

  <!-- Shipping Info -->
  <div class="shipping-info" [class.free-shipping]="shipping === 0">
    {{ getShippingInfo() }}
  </div>

  <!-- Discount -->
  <div class="summary-row" *ngIf="discount > 0">
    <span class="summary-label">
      Discount
      <span class="coupon-badge" *ngIf="couponCode">{{ couponCode }}</span>
    </span>
    <span class="summary-value discount-value">-{{ discount.toFixed(2) }} EGP</span>
  </div>

  <!-- Discount Code Input -->
  <div class="discount-code">
    <input
      type="text"
      placeholder="Enter discount code"
      [(ngModel)]="discountCodeInput"
      [disabled]="isApplyingCoupon"
      class="discount-input">
    <button
      class="apply-btn"
      (click)="onApplyDiscount()"
      [disabled]="isApplyingCoupon || !discountCodeInput.trim()">
      <span *ngIf="!isApplyingCoupon">Apply</span>
      <span *ngIf="isApplyingCoupon">
        <span class="spinner-small"></span>
        Applying...
      </span>
    </button>
  </div>

  <!-- Total -->
  <div class="summary-row total-row">
    <span class="total-label">Total</span>
    <span class="total-value">{{ total.toFixed(2) }} EGP</span>
  </div>

  <!-- Checkout Button -->
  <button class="checkout-btn" (click)="onCheckout()">
    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
      <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/>
    </svg>
    Proceed to Checkout
  </button>

  <!-- Trust Badges -->
  <div class="trust-badges">
    <div class="trust-badge">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M5.338 1.59a61.44 61.44 0 00-2.837.856.481.481 0 00-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 002.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 00.101.025.615.615 0 00.1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 002.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 00-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 011.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 01-2.517 2.453 7.159 7.159 0 01-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 01-1.048-.625 11.777 11.777 0 01-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 012.185 1.43 62.456 62.456 0 015.072.56z"/>
        <path d="M10.854 5.146a.5.5 0 010 .708l-3 3a.5.5 0 01-.708 0l-1.5-1.5a.5.5 0 11.708-.708L7.5 7.793l2.646-2.647a.5.5 0 01.708 0z"/>
      </svg>
      Secure Checkout
    </div>
    <div class="trust-badge">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 1a2 2 0 012 2v4H6V3a2 2 0 012-2zm3 6V3a3 3 0 00-6 0v4a2 2 0 00-2 2v5a2 2 0 002 2h6a2 2 0 002-2V9a2 2 0 00-2-2z"/>
      </svg>
      Safe Payment
    </div>
  </div>
</div>
